<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Open Dialer</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      background: #f2f2f7;
    }
    .card {
      background: white;
      padding: 18px;
      border-radius: 14px;
      box-shadow: 0 10px 30px rgba(0,0,0,.12);
      width: 320px;
      text-align: center;
    }
    button {
      width: 100%;
      border: none;
      border-radius: 12px;
      padding: 14px 16px;
      font-size: 16px;
      font-weight: 600;
      background: #34c759;
      color: white;
      cursor: pointer;
    }
    .hint {
      margin-top: 10px;
      font-size: 12px;
      color: #6b7280;
      line-height: 1.4;
    }
  </style>
</head>
<body>
  <div class="card">
    <button id="open">Open Dialer</button>
    <div class="hint">
      If nothing happens, allow popups for Airtable / this site.
    </div>
  </div>

  <script>
    function qs(name) {
      return new URLSearchParams(window.location.search).get(name) || "";
    }

    const to = qs("to");
    const name = qs("name");

    document.getElementById("open").addEventListener("click", () => {
      // Opens your dialer page in compact mode
      const dialerUrl =
        "/?to=" + encodeURIComponent(to) +
        "&name=" + encodeURIComponent(name) +
        "&compact=1";

      // Popup size (adjust if you want)
      const w = 360;
      const h = 680;

      const left = Math.max(0, Math.round((screen.width - w) / 2));
      const top = Math.max(0, Math.round((screen.height - h) / 2));

      const features =
        `popup=yes,width=${w},height=${h},left=${left},top=${top},` +
        `resizable=yes,scrollbars=no,toolbar=no,menubar=no,location=no,status=no`;

      const win = window.open(dialerUrl, "QuantraDialer", features);

      if (!win) {
        alert("Popup blocked. Allow popups for this site, then try again.");
        return;
      }

      win.focus();
    });
  </script>
</body>
</html>
